{% extends 'base.html' %}

{% block title %}通知一覧{% endblock %}

{% block contents %}
<div class="contanier mt-4">
    <h2 class="mb-4">🔔 通知一覧</h2>
    {% if object_list %}
        <ul class="list-group">
            {% for obj in object_list %}
                <li class="list-group-item {% if not obj.is_read %}list-group-item-warning{% endif %}">
                    <div>
                        {% if not obj.is_read %}
                            <span class="badge bg-danger me-2">未読</span>
                        {% else %}
                            <span class="badge bg-secondary me-2">既読</span>
                        {% endif %}
                    </div>
                    {{ obj.message }}
                    {% if obj.url %}
                        <a href="{% url 'notification:notification_redirect' obj.pk %}" class="btn btn-primary ms-2">詳細へ</a>
                    {% endif %}
                    <span class="text-muted float-end">{{ obj.created_at|date:"Y-m-d H:i"}}</span>
                </li>
            {% endfor %}
        </ul>

        <div class="mt-3">
            {% if is_paginated %}
                <nav>
                    <ul class="pagination">
                        {% if page_obj.has_previous %}
                            <li class="page-item"><a href="?page={{ page_obj.previous_page_number }}" class="page-link">前へ</a></li>
                        {% endif %}
                        <li class="page-item disabled">
                            <span class="page-link">ページ {{ page_obj.number }} / {{ page_obj.paginatior.num_pages }}</span>
                        </li>
                        {% if page_obj.has_next %}
                            <li class="page-item"><a href="?page={{ page_obj.next_page_number }}" class="page-link">次へ</a></li>
                        {% endif %}
                    </ul> 
                </nav>
            {% endif %}
        </div>
    {% else %}
        通知はありません。
    {% endif %}
</div>
{% endblock %}
